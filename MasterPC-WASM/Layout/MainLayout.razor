@inherits LayoutComponentBase

<MudThemeProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <CascadingValue Value="myMudTheme" Name="theme">

        <MudHidden Breakpoint="Breakpoint.LgAndUp" Invert="true">
            <AppBar />
        </MudHidden>

        <MudHidden Breakpoint="Breakpoint.MdAndDown" Invert="true">
            <MobileAppBar DrawerToggle="DrawerToggle" DrawerOpen="_drawerOpen" />

            <MudSwipeArea Style="width: 100%;">
                <MudDrawer @bind-Open="_drawerOpen" Elevation="2">
                    <MudDrawerHeader>
                        <MudStack Row AlignItems="AlignItems.Center">
                            <MudImage Src="favicon.ico" />
                            <MudText Typo="Typo.h5" Class="mt-1">MasterPC</MudText>
                        </MudStack>
                    </MudDrawerHeader>
                    <NavMenu />
                </MudDrawer>
            </MudSwipeArea>
        </MudHidden>

        <MudMainContent Style="padding-top: 0px">
            <MudHidden Breakpoint="Breakpoint.MdAndDown" Invert="true">
                <div style="min-height: 64px"></div>
            </MudHidden>

            @Body
        </MudMainContent>
    </CascadingValue>
</MudLayout>

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">🗙</a>
</div>

@code {
    public MyMudTheme myMudTheme = new MyMudTheme();
    public bool _drawerOpen = false;

    public void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }

    public void OnSwipe(SwipeDirection direction)
    {
        if (direction == SwipeDirection.LeftToRight && !_drawerOpen)
        {
            _drawerOpen = true;
            StateHasChanged();
        }
        else if (direction == SwipeDirection.RightToLeft && _drawerOpen)
        {
            _drawerOpen = false;
            StateHasChanged();
        }
    }
}